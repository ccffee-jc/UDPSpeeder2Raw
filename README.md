# UDPSpeeder2Raw Web Interface

åŸºäºDockerçš„UDPSpeeder2Raw Webç®¡ç†ç•Œé¢ï¼Œå‚è€ƒwg-easyé¡¹ç›®æ¶æ„è®¾è®¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸŒ **Webç•Œé¢ç®¡ç†** - ç®€æ´ç›´è§‚çš„Webç®¡ç†ç•Œé¢
- âš™ï¸ **å…¨å±€é…ç½®ç®¡ç†** - ç»Ÿä¸€ç®¡ç†è¿œç¨‹ä¸»æœºå’Œå¯†ç é…ç½®
- ğŸ“‹ **èŠ‚ç‚¹åˆ—è¡¨ç®¡ç†** - æ˜¾ç¤ºæ‰€æœ‰é…ç½®çš„èŠ‚ç‚¹åŠå…¶è¯¦ç»†ä¿¡æ¯
- â• **èŠ‚ç‚¹å¢åˆ æ”¹** - æ”¯æŒæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤èŠ‚ç‚¹é…ç½®
- ğŸ”„ **è‡ªåŠ¨ç«¯å£åˆ†é…** - æ™ºèƒ½åˆ†é…ç«¯å£ï¼Œæ”¯æŒç«¯å£ç©ºä½è¡¥é½
- ğŸ“¦ **å®¢æˆ·ç«¯é…ç½®å¯¼å‡º** - ä¸€é”®ç”Ÿæˆå¹¶ä¸‹è½½å®¢æˆ·ç«¯é…ç½®åŒ…
- ğŸ³ **Dockerå®¹å™¨åŒ–** - å®Œå…¨å®¹å™¨åŒ–éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨
- ğŸ”„ **è‡ªåŠ¨æœåŠ¡ç®¡ç†** - é…ç½®å˜æ›´åè‡ªåŠ¨é‡å¯æœåŠ¡

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker
- Docker Compose

### éƒ¨ç½²æ­¥éª¤

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨é¢„æ„å»ºçš„Dockeré•œåƒï¼ˆæ¨èï¼‰

1. **ä¸‹è½½é…ç½®æ–‡ä»¶æ¨¡æ¿**
   ```bash
   # ä¸‹è½½docker-composeé…ç½®
   wget https://raw.githubusercontent.com/ccffee-jc/UDPSpeeder2Raw/master/docker-compose.ghcr.yml
   
   # ä¸‹è½½ç¤ºä¾‹é…ç½®æ–‡ä»¶
   wget https://raw.githubusercontent.com/ccffee-jc/UDPSpeeder2Raw/master/config.json
   ```

2. **åˆ›å»ºå¿…è¦ç›®å½•**
   ```bash
   mkdir -p logs client_out
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose -f docker-compose.ghcr.yml up -d
   ```

#### æ–¹å¼äºŒï¼šä»æºç æ„å»º

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®æ–‡ä»¶**

2. **ç¡®ä¿æ‰€æœ‰å¿…è¦æ–‡ä»¶å­˜åœ¨**
   ```
   UDPSpeeder2Raw/
   â”œâ”€â”€ config.json              # é…ç½®æ–‡ä»¶
   â”œâ”€â”€ speederv2_amd64          # UDPSpeederäºŒè¿›åˆ¶æ–‡ä»¶
   â”œâ”€â”€ udp2raw_amd64            # UDP2RawäºŒè¿›åˆ¶æ–‡ä»¶
   â”œâ”€â”€ *.sh                     # å„ç§è„šæœ¬æ–‡ä»¶
   â”œâ”€â”€ client/                  # å®¢æˆ·ç«¯æ–‡ä»¶ç›®å½•
   â”œâ”€â”€ templates/               # æ¨¡æ¿æ–‡ä»¶ç›®å½•
   â”œâ”€â”€ src/                     # Webç•Œé¢æºç 
   â”œâ”€â”€ Dockerfile               # Dockeræ„å»ºæ–‡ä»¶
   â”œâ”€â”€ docker-compose.yml       # Docker Composeé…ç½®
   â””â”€â”€ start-web.sh             # å¯åŠ¨è„šæœ¬
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   # æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
   ./start-web.sh
   
   # æ–¹å¼2: ä½¿ç”¨ç®¡ç†è„šæœ¬
   ./manage.sh start
   
   # æ–¹å¼3: ç›´æ¥ä½¿ç”¨docker-compose
   sudo docker-compose up -d --build
   ```

4. **è®¿é—®Webç•Œé¢**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:3000`

### ç®¡ç†å‘½ä»¤

é¡¹ç›®æä¾›äº†ä¸€ä¸ªä¾¿æ·çš„ç®¡ç†è„šæœ¬ `manage.sh`ï¼š

```bash
# å¯åŠ¨æœåŠ¡
./manage.sh start

# åœæ­¢æœåŠ¡  
./manage.sh stop

# é‡å¯æœåŠ¡
./manage.sh restart

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./manage.sh status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./manage.sh logs

# æ›´æ–°æœåŠ¡ï¼ˆé‡æ–°æ„å»ºå¹¶é‡å¯ï¼‰
./manage.sh update

# ä»…é‡æ–°æ„å»ºé•œåƒ
./manage.sh build
```

## ä½¿ç”¨è¯´æ˜

### å…¨å±€é…ç½®

- ç‚¹å‡»"ä¿®æ”¹é…ç½®"æŒ‰é’®å¯ä»¥ä¿®æ”¹è¿œç¨‹ä¸»æœºåœ°å€å’Œå¯†ç 
- è¿™äº›é…ç½®ä¼šåº”ç”¨åˆ°æ‰€æœ‰èŠ‚ç‚¹

### èŠ‚ç‚¹ç®¡ç†

#### æ–°å¢èŠ‚ç‚¹
1. ç‚¹å‡»"æ–°å¢èŠ‚ç‚¹"æŒ‰é’®
2. å¡«å†™èŠ‚ç‚¹åç§°å’Œç›¸å…³é…ç½®å‚æ•°
3. ç«¯å£ä¼šè‡ªåŠ¨åˆ†é…ï¼ˆSpeederç«¯å£ä»10001å¼€å§‹ï¼ŒUDP2Rawç«¯å£ä»10002å¼€å§‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹é—´éš”10ï¼‰
4. ç‚¹å‡»"åˆ›å»º"å®Œæˆæ·»åŠ 

#### ä¿®æ”¹èŠ‚ç‚¹
1. ç‚¹å‡»èŠ‚ç‚¹å¯¹åº”çš„"ä¿®æ”¹"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„çª—å£ä¸­ä¿®æ”¹é…ç½®ï¼ˆç«¯å£ä¸å¯ä¿®æ”¹ï¼‰
3. ç‚¹å‡»"ä¿å­˜"å®Œæˆä¿®æ”¹

#### åˆ é™¤èŠ‚ç‚¹
1. ç‚¹å‡»èŠ‚ç‚¹å¯¹åº”çš„"åˆ é™¤"æŒ‰é’®
2. åœ¨ç¡®è®¤å¯¹è¯æ¡†ä¸­ç¡®è®¤åˆ é™¤æ“ä½œ

#### å¯¼å‡ºå®¢æˆ·ç«¯é…ç½®
1. ç‚¹å‡»èŠ‚ç‚¹å¯¹åº”çš„"å¯¼å‡º"æŒ‰é’®
2. ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨`generateClient.sh`ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®
3. é…ç½®æ–‡ä»¶ä¼šä»¥ZIPæ ¼å¼è‡ªåŠ¨ä¸‹è½½

### ç«¯å£åˆ†é…è§„åˆ™

- Speederç«¯å£ï¼š10001, 10011, 10021, 10031...ï¼ˆæ­¥é•¿10ï¼‰
- UDP2Rawç«¯å£ï¼š10002, 10012, 10022, 10032...ï¼ˆæ­¥é•¿10ï¼‰
- å¦‚æœä¸­é—´æœ‰èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œæ–°å¢èŠ‚ç‚¹æ—¶ä¼šä¼˜å…ˆå¡«è¡¥ç©ºç¼ºçš„ç«¯å£ä½

### è‡ªåŠ¨æœåŠ¡ç®¡ç†

- å®¹å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨`start_mapping_server.sh`å¯åŠ¨æ˜ å°„æœåŠ¡
- æ¯æ¬¡èŠ‚ç‚¹é…ç½®å‘ç”Ÿå˜æ›´ï¼ˆå¢åˆ æ”¹ï¼‰åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨`restart.sh`é‡å¯æœåŠ¡
- å®¹å™¨å…³é—­æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨`stop_mapping_server.sh`åœæ­¢æ˜ å°„æœåŠ¡

## Dockerå‘½ä»¤

### æŸ¥çœ‹æ—¥å¿—
```bash
docker-compose logs -f
```

### åœæ­¢æœåŠ¡
```bash
docker-compose down
```

### é‡å¯æœåŠ¡
```bash
docker-compose restart
```

### é‡æ–°æ„å»º
```bash
docker-compose up -d --build
```

## ç«¯å£é…ç½®

ç½‘ç»œé…ç½®ï¼š
- **ç½‘ç»œæ¨¡å¼**ï¼šhostï¼ˆä¸»æœºç½‘ç»œæ¨¡å¼ï¼‰
- **Webç•Œé¢**ï¼š3000ç«¯å£
- **UDPç«¯å£**ï¼šæ ¹æ®é…ç½®åŠ¨æ€åˆ†é…ï¼ˆé€šå¸¸ä»10001å¼€å§‹ï¼‰

ä½¿ç”¨hostç½‘ç»œæ¨¡å¼çš„ä¼˜åŠ¿ï¼š
- æ— éœ€ç«¯å£æ˜ å°„é…ç½®
- æ€§èƒ½æ›´å¥½ï¼Œå»¶è¿Ÿæ›´ä½
- è‡ªåŠ¨æ”¯æŒæ‰€æœ‰ç«¯å£èŒƒå›´
- ç®€åŒ–ç½‘ç»œé…ç½®

**æ³¨æ„**ï¼šhostç½‘ç»œæ¨¡å¼ä¸‹ï¼Œå®¹å™¨ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œæ ˆï¼Œç¡®ä¿æ‰€éœ€ç«¯å£æœªè¢«å…¶ä»–æœåŠ¡å ç”¨ã€‚

## æ•°æ®æŒä¹…åŒ–

ä»¥ä¸‹æ•°æ®ä¼šè‡ªåŠ¨æŒä¹…åŒ–åˆ°å®¿ä¸»æœºï¼š
- `config.json` - é…ç½®æ–‡ä»¶
- `logs/` - æ—¥å¿—æ–‡ä»¶
- `client_out/` - ç”Ÿæˆçš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
   - æ£€æŸ¥3000ç«¯å£æ˜¯å¦è¢«å…¶ä»–æœåŠ¡å ç”¨
   - æˆ–ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„

2. **æƒé™é—®é¢˜**
   - ç¡®ä¿è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š`chmod +x *.sh`
   - ç¡®ä¿äºŒè¿›åˆ¶æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™

3. **Dockeræƒé™é—®é¢˜**
   - ç¡®ä¿å½“å‰ç”¨æˆ·æœ‰Dockeræ‰§è¡Œæƒé™
   - æˆ–ä½¿ç”¨sudoè¿è¡Œ

4. **é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯**
   - æ£€æŸ¥config.jsonæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ä½¿ç”¨JSONéªŒè¯å™¨éªŒè¯è¯­æ³•

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs udpspeeder2raw-web

# æŸ¥çœ‹æ˜ å°„æœåŠ¡æ—¥å¿—
docker-compose exec udpspeeder2raw-web cat /app/logs/mapping_server.log

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker-compose exec udpspeeder2raw-web sh
```

## Dockeré•œåƒ

### å®˜æ–¹é•œåƒä»“åº“

é¡¹ç›®æä¾›äº†é¢„æ„å»ºçš„Dockeré•œåƒï¼Œæ‰˜ç®¡åœ¨GitHub Container Registryï¼š

- **é•œåƒåœ°å€**: `ghcr.io/ccffee-jc/udpspeeder2raw`
- **æ”¯æŒæ¶æ„**: linux/amd64, linux/arm64
- **æ ‡ç­¾**:
  - `latest`: æœ€æ–°ç¨³å®šç‰ˆæœ¬
  - `v1.0.0`: ç‰¹å®šç‰ˆæœ¬æ ‡ç­¾

### ä½¿ç”¨é¢„æ„å»ºé•œåƒ

```bash
# æ‹‰å–æœ€æ–°é•œåƒ
docker pull ghcr.io/ccffee-jc/udpspeeder2raw:latest

# ä½¿ç”¨é¢„æ„å»ºé•œåƒéƒ¨ç½²
docker-compose -f docker-compose.ghcr.yml up -d
```

### æ‰‹åŠ¨æ„å»ºé•œåƒ

```bash
# æ„å»ºæœ¬åœ°é•œåƒ
docker build -t udpspeeder2raw .

# æ„å»ºå¤šæ¶æ„é•œåƒ
docker buildx build --platform linux/amd64,linux/arm64 -t udpspeeder2raw .

# é¢„ä¸‹è½½æ‰€æœ‰æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
./prepare-binaries.sh

# ä¸‹è½½ç‰¹å®šæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
./download-binaries.sh arm64
```

### å¤šæ¶æ„æ”¯æŒ

æœ¬é¡¹ç›®æ”¯æŒä»¥ä¸‹æ¶æ„ï¼š

- **linux/amd64**: Intel/AMD 64ä½å¤„ç†å™¨
- **linux/arm64**: ARM 64ä½å¤„ç†å™¨ (å¦‚æ ‘è“æ´¾4ã€Apple Mç³»åˆ—)
- **linux/arm**: ARM 32ä½å¤„ç†å™¨ (å¦‚è€ç‰ˆæœ¬æ ‘è“æ´¾)

Dockeré•œåƒæ„å»ºæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½å¯¹åº”æ¶æ„çš„UDPspeederå’ŒUDP2RawäºŒè¿›åˆ¶æ–‡ä»¶ã€‚å¦‚æœä¸‹è½½å¤±è´¥ï¼Œä¼šä½¿ç”¨æœ¬åœ°çš„fallbackæ–‡ä»¶ã€‚

### äºŒè¿›åˆ¶æ–‡ä»¶ç®¡ç†

```bash
# é¢„ä¸‹è½½æ‰€æœ‰æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
./manage.sh prepare

# ä¸‹è½½ç‰¹å®šæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
./manage.sh download arm64

# æ‰‹åŠ¨ä¸‹è½½å¹¶ç®¡ç†äºŒè¿›åˆ¶æ–‡ä»¶
./download-binaries.sh amd64    # ä¸‹è½½AMD64æ¶æ„
./download-binaries.sh arm64    # ä¸‹è½½ARM64æ¶æ„
./download-binaries.sh arm      # ä¸‹è½½ARMæ¶æ„
```

### å‘å¸ƒé•œåƒåˆ°GHCR

å¦‚æœæ‚¨æƒ³å‘å¸ƒè‡ªå·±çš„é•œåƒç‰ˆæœ¬ï¼š

1. **ç”ŸæˆGitHub Token**
   - è®¿é—® GitHub Settings > Developer settings > Personal access tokens
   - åˆ›å»ºtokenï¼Œå‹¾é€‰ `write:packages` æƒé™

2. **ç™»å½•åˆ°GHCR**
   ```bash
   echo $GITHUB_TOKEN | docker login ghcr.io -u YOUR_USERNAME --password-stdin
   ```

3. **æ„å»ºå¹¶æ¨é€**
   ```bash
   # ä½¿ç”¨å‘å¸ƒè„šæœ¬
   ./publish-docker.sh v1.0.0
   
   # æˆ–è€…æ‰‹åŠ¨æ„å»ºæ¨é€
   docker buildx build --platform linux/amd64,linux/arm64 \
     --tag ghcr.io/YOUR_USERNAME/udpspeeder2raw:latest \
     --push .
   ```

## æŠ€æœ¯æ¶æ„

- **å‰ç«¯**: Vue.js + Tailwind CSS
- **åç«¯**: Node.js + Express
- **å®¹å™¨**: Docker + Docker Compose
- **é…ç½®ç®¡ç†**: JSONé…ç½®æ–‡ä»¶
- **æ–‡ä»¶ç”Ÿæˆ**: è°ƒç”¨åŸæœ‰Shellè„šæœ¬

## å®‰å…¨è¯´æ˜

- æœ¬ç•Œé¢è®¾è®¡ä¸ºå†…ç½‘ä½¿ç”¨ï¼Œä¸å»ºè®®ç›´æ¥æš´éœ²åˆ°å…¬ç½‘
- å¦‚éœ€å…¬ç½‘è®¿é—®ï¼Œè¯·é…ç½®åå‘ä»£ç†å¹¶å¯ç”¨HTTPS
- å»ºè®®å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶

## è®¸å¯è¯

MIT License
